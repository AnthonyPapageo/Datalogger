/*
* menu.cpp
*
* Created: 22/03/2019 13:14:24
*  Author: Anthony
*/

#include <LiquidMenu.h>
#include "menu.h"


/////////////STRINGS//////////////////////
/////////////Welcome Screen////////////////////
const char welcome_text0[] PROGMEM  = "TEST PROGRAM";
const char welcome_text1[] PROGMEM = "ADC";
const char welcome_text2[] PROGMEM = "Build on :";
const char welcome_text3[] PROGMEM =  __DATE__;
LiquidLine welcome_line0(0,0,welcome_text0);
LiquidLine welcome_line1(0,1,welcome_text1);
LiquidLine welcome_line2(0,2,welcome_text2);
LiquidLine welcome_line3(0,3,welcome_text3);
LiquidScreen welcome_Screen(welcome_line0, welcome_line1, welcome_line2, welcome_line3);

/////////////Main Screen////////////////////
const char main_text0[]  = "   MAIN MENU   ";
const char main_text1[]  = "1: CALIBRATE ADC";
const char main_text2[]  = "2: CONFIGURE ADC";
const char main_text3[]  = "3: SHOW LIVE VALUES";
LiquidLine main_line0(0,0,main_text0);
LiquidLine main_line1(0,1,main_text1);
LiquidLine main_line2(0,2,main_text2);
LiquidLine main_line3(0,3, main_text3);
LiquidScreen main_Screen(main_line0,main_line1,main_line2,main_line3);

/////////////Calibrate ADC Screen////////////////////
//CalibrateGain

const char calibrateGainText0[]  = "Set 24V on V1";
const char calibrateGainText1[]  = "Click here when ready";
LiquidLine calibrategain_line0(0,0, calibrateGainText0);
LiquidLine calibrategain_line1(0,1, calibrateGainText1);
LiquidScreen calibrateGain_Screen(calibrategain_line0,calibrategain_line1);

//CalibrateOffset

const char calibrateOffsetText0[]  = "Set 0V on V1";
const char calibrateOffsetText1[]  = "Click here when ready";
LiquidLine calibrateoffset_line0(0,0,calibrateOffsetText0);
LiquidLine calibrateoffset_line1(0,1,calibrateOffsetText1);
LiquidScreen calibrateOffset_Screen(calibrategain_line0,calibrategain_line1);

//CalibrateDone
const char calibrationDoneText0[]  = "Calibration Done";
const char calibrationDoneText1[]  = "Exit";
LiquidLine calibrationDone_line0(0,0, calibrationDoneText0);
LiquidLine calibrationDone_line1(0,1, calibrationDoneText1);
LiquidScreen calibrationDone_Screen(calibrategain_line0, calibrategain_line1);




/////////////ADC CONFIGURATION////////////////////
const char configureAdcText0[]  = "Nothing yet sorry :(";
const char configureAdcText1[]  = "Exit";
LiquidLine configureAdc_line0(0,0,configureAdcText0);
LiquidLine configureAdc_line1(0,1,configureAdcText1);
LiquidScreen configureAdc_Screen(configureAdc_line0, configureAdc_line1);

/////////////Live readings Screen////////////////////
uint32_t V1Value = 0;
uint32_t V2Value = 0;
const char liveReadText0[]  = "V1 = ";
const char liveReadText1[]  = "V2 = ";
const char liveReadText2[]  = "EXIT";
//const char liveReadText3[] ;
LiquidLine liveRead_line0(0,0,liveReadText0, V1Value, "mV");
LiquidLine liveRead_line1(0,1,liveReadText1, V2Value, "mV");
LiquidLine liveRead_line2(0,2, liveReadText2);
LiquidScreen liveRead_Screen(liveRead_line0,liveRead_line1,liveRead_line2);

//////////////INA///////////////
uint32_t I1Value = 0;
uint32_t VBusValue =0;
LiquidLine INA_line0 (0,0, "Current readings");
LiquidLine INA_line1 (0,1, "Current on I2 : ", I1Value, "uA");
LiquidLine INA_line2 (0,2,"I2 Bus voltage :", VBusValue, "mV");
LiquidLine INA_line3 (0,3, "EXIT");
LiquidScreen INA_Screen (INA_line0,INA_line1,INA_line2,INA_line3);



void putInProgmem(void)
{
	welcome_line0.set_asProgmem(1);
	welcome_line1.set_asProgmem(1);
	welcome_line2.set_asProgmem(1);
	welcome_line3.set_asProgmem(1);
	main_line0.set_asProgmem(1);
	main_line1.set_asProgmem(1);
	main_line2.set_asProgmem(1);
	main_line3.set_asProgmem(1);
	calibrategain_line0.set_asProgmem(1);
	calibrategain_line1.set_asProgmem(1);
	calibrateoffset_line0.set_asProgmem(1);
	calibrateoffset_line1.set_asProgmem(1);
	configureAdc_line0.set_asProgmem(1);
	configureAdc_line1.set_asProgmem(1);
	liveRead_line0.set_asProgmem(1);
	liveRead_line1.set_asProgmem(1);
	liveRead_line2.set_asProgmem(1);
}
void gotoMainScreen(void)
{
	menu.change_screen(main_Screen);
}

void gotoCalibrationOffsetScreen(void)
{
	menu.change_screen(calibrateOffset_Screen);
}
void gotoCalibrationGainScreen(void)
{
	menu.change_screen(calibrateGain_Screen);
}

void gotoConfigureAdcScreen(void)
{
	menu.change_screen(configureAdc_Screen);
}

void gotoLiveReadingsScreen(void)
{
	menu.change_screen(liveRead_Screen);
}

void gotoCalibrationDoneScreen(void)
{
	menu.change_screen(calibrationDone_Screen);
}
